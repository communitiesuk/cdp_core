parameters:
  - name: servicePrincipal
    type: string
  - name: description
    type: string
  - name: inlineScript
    type: string

steps:
  - task: AzureCLI@2
    condition: succeeded()
    displayName: ${{ parameters.description }}
    inputs:
      azureSubscription: ${{ parameters.servicePrincipal }} # BUG - https://github.com/microsoft/azure-pipelines-tasks/issues/17218
      useGlobalConfig: true
      scriptType: bash
      scriptLocation: inlineScript
      inlineScript: ${{ parameters.inlineScript }}
